<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>Kontrol Pompa</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-light py-5">
    <div class="container">
      <h2 class="mb-4 text-center">Kontrol Pompa Greenhouse</h2>

      <!-- Form Kontrol Pompa -->
      <div class="card shadow-sm p-4">
        <div class="form-check form-switch mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="pompa_ph"
          />
          <label class="form-check-label" for="pompa_ph">Pompa pH</label>
        </div>

        <div class="form-check form-switch mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="pompa_nuta"
          />
          <label class="form-check-label" for="pompa_nuta"
            >Pompa Nutrisi A</label
          >
        </div>

        <div class="form-check form-switch mb-4">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="pompa_nutb"
          />
          <label class="form-check-label" for="pompa_nutb"
            >Pompa Nutrisi B</label
          >
        </div>

        <button class="btn btn-primary" onclick="kirimData()">Kirim</button>
        <div id="status" class="mt-3 text-success fw-bold"></div>
      </div>
    </div>

    <!-- Script JS -->
    <script>
      function kirimData() {
        // Ambil status slider
        const pompa_ph = document.getElementById("pompa_ph").checked ? 1 : 0;
        const pompa_nuta = document.getElementById("pompa_nuta").checked
          ? 1
          : 0;
        const pompa_nutb = document.getElementById("pompa_nutb").checked
          ? 1
          : 0;

        const data = {
          pompa_ph,
          pompa_nuta,
          pompa_nutb,
        };

        // Ganti URL di bawah ini dengan URL Web App kamu (Google Apps Script)
        const url =
          "https://script.google.com/macros/s/AKfycbw5pQTb6ArRrwi7T4vZUHJnDPR3O1CJoscUjjnqRISXZl5y01LKGRsk49-il4IF8MlspQ/exec";

        fetch(url, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        })
          .then((response) => response.text())
          .then((result) => {
            document.getElementById("status").textContent =
              "✅ Data berhasil dikirim!";
          })
          .catch((error) => {
            document.getElementById("status").textContent =
              "❌ Gagal mengirim data.";
            console.error(error);
          });
      }
    </script>
  </body>
</html>
